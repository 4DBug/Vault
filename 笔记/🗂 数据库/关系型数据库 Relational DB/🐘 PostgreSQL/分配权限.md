使用管理员连入

```shell
$ psql -h pgsql.ayaka.internal -u postgres -W
```

列出数据库

```shell
psql (14.0)
Type "help" for help.

> \l # 列出库
                                 List of databases
   Name    |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges
-----------+----------+----------+------------+------------+-----------------------
 app_sso   | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =Tc/postgres         +
           |          |          |            |            | postgres=CTc/postgres+
           |          |          |            |            | app_sso=CTc/postgres +
           |          |          |            |            | grafana=c/postgres
 postgres  | postgres | UTF8     | en_US.utf8 | en_US.utf8 |
 template0 | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +
           |          |          |            |            | postgres=CTc/postgres
 template1 | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +
           |          |          |            |            | postgres=CTc/postgres
(4 rows)
```

选中库

```shell
> \c app_sso
Password:
You are now connected to database "app_sso" as user "postgres".
```

1. 分配连接权限

```sql
GRANT CONNECT ON DATABASE <数据库名称> TO <用户>;
```

2. 分配模式使用权限

```sql
GRANT USAGE ON SCHEMA <模式名称> TO <用户>;
```

3. 分配表权限

```sql
GRANT ALL PRIVILEGES ON DATABASE <数据库名称> TO <用户>;
```

如果是只读用户的话：

```sql
GRANT SELECT ON ALL TABLES IN SCHEMA <模式名称> TO <用户>;
```