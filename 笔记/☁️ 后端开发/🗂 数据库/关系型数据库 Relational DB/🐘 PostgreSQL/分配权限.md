使用管理员连入

```shell
$ psql -h pgsql.ayaka.internal -u postgres -W
```

列出数据库

```shell
psql (14.0)
Type "help" for help.

> \l # 列出库
                                 List of databases
   Name    |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges
-----------+----------+----------+------------+------------+-----------------------
 app_sso   | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =Tc/postgres         +
           |          |          |            |            | postgres=CTc/postgres+
           |          |          |            |            | app_sso=CTc/postgres +
           |          |          |            |            | grafana=c/postgres
 postgres  | postgres | UTF8     | en_US.utf8 | en_US.utf8 |
 template0 | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +
           |          |          |            |            | postgres=CTc/postgres
 template1 | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +
           |          |          |            |            | postgres=CTc/postgres
(4 rows)
```

选中库

```shell
> \c app_sso
Password:
You are now connected to database "app_sso" as user "postgres".
```

1. 分配连接权限

```sql
GRANT CONNECT ON DATABASE <数据库名称> TO <用户>;
```

2. 分配模式使用权限

```sql
GRANT USAGE ON SCHEMA <模式名称> TO <用户>;
```

3. 分配表权限

```sql
GRANT ALL PRIVILEGES ON DATABASE <数据库名称> TO <用户>;
```

如果是只读用户的话：

```sql
GRANT SELECT ON ALL TABLES IN SCHEMA <模式名称> TO <用户>;
```

```sql
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA <模式名称> TO <用户>;
```

```sql
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA <模式名称> TO <用户>;
```

```sql
GRANT ALL PRIVILEGES ON ALL FUNCTIONS IN SCHEMA <模式名称> TO <用户>;
```

```sql
ALTER TABLE <表名> OWNER TO <用户>;
```

```sql
GRANT <组> TO <用户>;
```

```sql
GRANT CREATE ON SCHEMA <模式名称> TO <用户>;
```

#序列（自增键）属性授权，指定test schema下的seq_id_seq 给test用户 
```sql
GRANT SELECT, UPDATE ON SEQUENCE <序列名称> TO <用户>;
```

#序列（自增键）属性授权，给用户test授权test schema下的所有序列
```sql
GRANT SELECT, UPDATE ON ALL SEQUENCES ON SCHEMA <模式名称> TO <用户>;
```

```sql
CREATE DATABASE "mono_app"
WITH
  OWNER = "postgres"
  LC_COLLATE = 'en_US.utf8'
  LC_CTYPE = 'en_US.utf8'
;

CREATE SCHEMA IF NOT EXISTS "users";

GRANT mono_service TO postgres;
GRANT USAGE ON SCHEMA users TO mono_service;
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA users TO mono_service;
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA users TO mono_service;
GRANT ALL PRIVILEGES ON ALL FUNCTIONS IN SCHEMA users TO mono_service;
GRANT CREATE ON SCHEMA users TO mono_service;

ALTER TABLE users.infos OWNER TO mono_service;
ALTER TABLE users.accounts OWNER TO mono_service;

SELECT setval('"users"."users_accounts_id_seq"', 1, true);
```